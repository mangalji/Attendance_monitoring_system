{% extends 'base.html' %}
{% load attendance_extras %}
{% block title %}My Fees{% endblock %}

{% block content %}
<button><a href="{% url 'student_dashboard' %}">Back to Dashboard</a></button>
<h3>My Fee Status</h3>

<div style="margin-top: 20px; padding: 20px; border: 1px solid #ddd; border-radius: 8px; background-color: #f9f9f9;">
    <h4>Summary</h4>
    <div style="display: flex; gap: 20px; margin-bottom: 20px;">
        <div
            style="flex: 1; padding: 15px; background: white; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); text-align: center;">
            <strong style="color: #666;">Total Fees</strong><br>
            <span style="font-size: 1.4em; font-weight: bold;">₹{{ fee_record.total_fees }}</span>
        </div>
        <div
            style="flex: 1; padding: 15px; background: white; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); text-align: center;">
            <strong style="color: #666;">Paid Fees</strong><br>
            <span style="font-size: 1.4em; font-weight: bold; color: #4caf50;">₹{{ fee_record.paid_fees }}</span>
        </div>
        <div
            style="flex: 1; padding: 15px; background: white; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); text-align: center;">
            <strong style="color: #666;">Remaining</strong><br>
            <span class="remaining-amount {% if fee_record.remaining_fees > 0 %}pending{% else %}cleared{% endif %}">
                ₹{{ fee_record.remaining_fees }}
            </span>
        </div>
    </div>

    <hr>

    <h4>Receipts / Installments</h4>
    <ul style="list-style: none; padding: 0;">
        {% for i in "1234" %}
        {% with field_name="installment_"|add:i %}
        {% with file=fee_record|get_attr:field_name %}
        <li
            style="margin-bottom: 10px; padding: 10px; background: white; border-radius: 6px; border-left: 4px solid #007bff;">
            <strong>Installment {{ i }}:</strong>
            {% if file %}
            <a href="{{ file.url }}" target="_blank"
                style="color: #007bff; text-decoration: none; margin-left: 10px; font-weight: bold;">Download
                Receipt</a>
            {% else %}
            <span style="color: #999; margin-left: 10px;">Not uploaded yet</span>
            {% endif %}
        </li>
        {% endwith %}
        {% endwith %}
        {% endfor %}
    </ul>
</div>

<style>
    h3 {
        color: #333;
        margin-bottom: 20px;
    }

    h4 {
        color: #555;
        margin-bottom: 15px;
    }

    button a {
        text-decoration: none;
        color: inherit;
    }

    .remaining-amount {
        font-size: 1.4em;
        font-weight: bold;
    }

    .remaining-amount.pending {
        color: #f44336;
    }

    .remaining-amount.cleared {
        color: #4caf50;
    }
</style>
{% endblock %}%                     